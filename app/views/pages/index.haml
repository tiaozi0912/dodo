.posts
  .page-header.timer-container
    .wrapper
      %h1.muted
        <span class="timer">0</span> Days 
        %small Where is dodo?
  
  - if current_user.nil?
    .container{:role => "main"}
      .signin-container
        .heading
          %h1 Love like never be hurt 
        = render :partial => "sessions/new"

  - else
    .container.relative-position{:role => "main"}
      - if me?
        %a.btn.btn-primary.btn-new-post{:href => "#{new_post_path}"}
          %i.icon-pencil.icon-white
          New post
      %a.btn.btn-back-top{:href => "#timeline-container"} Back to top
      .timeline-container
        - @posts.each do |po|
          - @has_photo = (po.has_photo? ? "with-photo" : "no-photo")
          %div{:class => "post-container row-fluid #{@has_photo}"}
            .left.span4
              - if po.has_photo?
                = image_tag po.photo.url(:medium), :class => "image-rounded"
              .post-date
                %span #{diff_in_days(po.date)} days.
                %span.muted #{time_str(po.date)}
            .right.span8
              .wrapper
                %small.muted #{po.date.localtime.strftime("%a %F")}
                %p #{po.body}
            .dot
            .divider
            - if me?
              %a.btn.btn-edit-post.hide{:href => "#{edit_post_path(po)}"}
                %i.icon-edit

:javascript
  drawDivider();
  $('.timer').timer();

  $('.post-container').hover(function(e) {
    var target = e.currentTarget;
    $(target).find('.btn-edit-post').stop(true, true).show();
  }, function(e) {
    var target = e.currentTarget;
    $(target).find('.btn-edit-post').stop(true, true).hide();
  })
        